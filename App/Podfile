platform :ios, '8.0'
use_frameworks!

def shared_pods
    pod 'SwiftMessages'
    pod 'KeychainAccess'
    pod 'Alamofire'
    pod 'SwiftyJSON'
    pod 'OAuthSwift'
    pod 'CocoaLumberjack/Swift'
    pod 'GzipSwift'
end

target 'RouteRecorder' do
    shared_pods
end

target 'Ride Report' do
    shared_pods
    pod 'Fabric'
    pod 'Crashlytics'
    pod 'Kingfisher'
    pod 'Charts'
    pod 'WebLinking'
    pod 'Presentr'
    pod 'UIImageColors'
    pod 'FBSDKCoreKit'
    pod 'FBSDKLoginKit'
    pod 'FBSDKShareKit'
    pod 'Mapbox-iOS-SDK', :configurations => ['Release']
    pod 'Mapbox-iOS-SDK-symbols', :podspec => "https://raw.githubusercontent.com/mapbox/mapbox-gl-native/ios-v3.6.3/platform/ios/Mapbox-iOS-SDK-symbols.podspec", :configurations => ['Debug']
    pod 'Mixpanel-swift'
    pod 'BadgeSwift'
end

target 'Ride Report Tests' do
    shared_pods
    pod 'OHHTTPStubs/Swift'
end

target 'Ride Report UITests' do
    shared_pods
    pod 'OHHTTPStubs/Swift'
end

target 'Motion' do
    shared_pods
    pod 'Eureka'
end

target 'Ride Report Notification Content' do
    pod 'SwiftyJSON'
    pod 'GzipSwift'
    pod 'CocoaLumberjack/Swift'
end

swift4Targets = ['Eureka', 'Charts', 'Mixpanel-swift', 'Presentr']

post_install do |installer|
    installer.pods_project.targets.each do |target|
        target.build_configurations.each do |config|
            if swift4Targets.include? target.name
                config.build_settings['SWIFT_VERSION'] = '4.0'
            else
                config.build_settings['SWIFT_VERSION'] = '3.0'
            end
            config.build_settings['ENABLE_BITCODE'] = 'NO'
            config.build_settings['PROVISIONING_PROFILE_SPECIFIER'] = 'Ride Report Dev'
        end
    end
end
